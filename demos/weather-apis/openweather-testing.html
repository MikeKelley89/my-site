<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Weather API demo</title>
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  </head>
  <body>
    <form id="localWeather">
      <div>
        <label for="zip">Enter your zip code:</label>
        <input id="zip" type="text" name="text" />
      </div>
      <div>
        <button
          id="getWeather"
          type="button"
          onclick="checkWeather()"
          class="btn btn-danger weatherbutton"
        >
          Check weather conditions
        </button>
      </div>
    </form>

    <h2>Conditions for <span id="location"></span></h2>
    <span><b>Temperature: </b></span><span id="main_temp"></span
    ><span id="main_temp_unit"></span><br />
    <span><b>Wind speed: </b></span><span id="wind_speed"></span>
    <span id="wind_speed_unit"></span><br />
    <span><b>Wind direction: </b></span><span id="wind_direction"></span
    ><span id="wind_degree_unit"></span><br />
    <span><b>Current conditions: </b></span
    ><span id="weather_conditions"></span>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"
    ></script>
    <script>
      $("#localWeather").submit(function (event) {
        event.preventDefault();
        checkWeather();
      });
      function checkWeather() {
        var settings = {
          async: true,
          crossDomain: true,
          dataType: "json",
          url:
            "https://api.openweathermap.org/data/2.5/weather?zip=" +
            document.getElementById("zip").value +
            ",us&appid=48ced08bac40a7979644285e22addce1&units=imperial",
          method: "GET",
        };
        $.ajax(settings).done(function (response) {
          console.log(response);

          $("#wind_speed").text(response.wind.speed);
          $("#wind_direction").text(response.wind.deg);
          $("#main_temp").text(response.main.temp);
          $("#weather_conditions").text(response.weather[0].main);
          $("#wind_speed_unit").text(" MPH");
          $("#wind_degree_unit").text(" degrees");
          $("#main_temp_unit").text(" F");
          $("#location").text(response.name);
        });
      }
    </script>
  </body>
</html>
